import"./index.css";import liff from"@line/liff";document.addEventListener("DOMContentLoaded",(function(){liff.init({liffId:"2003556825-NAK5W0Az"}).then((()=>{const e=document.getElementById("loanAmountInput"),t=document.getElementById("interestRateSlider"),n=document.getElementById("loanPeriodSlider"),a=document.getElementById("displayYearSlider"),o=document.getElementById("rentYear0Input"),l=document.getElementById("declineRateSlider"),r=document.getElementById("runningCostInput"),d=document.getElementById("cashFlowChart").getContext("2d"),i=new Chart(d,{type:"line",data:{labels:[],datasets:[{label:"Cash Flow",type:"line",backgroundColor:"rgb(50, 131, 76)",borderColor:"rgb(50, 131, 76)",data:[]},{label:"Actual Annual Income",type:"line",backgroundColor:"rgb(131, 131, 50)",borderColor:"rgb(131, 131, 50)",data:[]},{label:"Expenditure",type:"line",backgroundColor:"rgb(152, 0, 0)",borderColor:"rgb(152, 0, 0)",data:[]},{label:"Cumulative Cash Flow",type:"bar",backgroundColor:"rgba(78, 50, 131, 0.4)",data:[]}]},options:{responsive:!0,maintainAspectRatio:!0,scales:{x:{type:"linear",beginAtZero:!0,stacked:!0,ticks:{callback:function(e,t,n){return`Year ${e}`}},grid:{display:!1}},y:{beginAtZero:!1}},interaction:{mode:"index"}}});function s(){loanAmount.innerHTML=e.value,interestRate.innerHTML=t.value,loanPeriod.innerHTML=n.value,displayYear.innerHTML=a.value,rentYear0.innerHTML=o.value,declineRate.innerHTML=l.value,runningCost.innerHTML=r.value,function(){const d=parseFloat(e.value),s=parseFloat(t.value)/100,u=parseFloat(n.value),c=parseFloat(a.value),p=parseFloat(o.value),g=parseFloat(l.value)/100,m=parseFloat(r.value),f=function(e,t,n,a,o,l,r){console.log("Loan Amount:",e),console.log("Interest Rate:",t),console.log("Loan Period:",n),console.log("Rent at Year 0:",a),console.log("Decline Rate:",o),console.log("Running Cost:",l),console.log("Display Years:",r);const d=[],i=e*(1+t)/n;for(let e=1;e<=n;e++){const t=a*Math.pow(1-o,e)-(l+i);d.push(t)}if(n<r){for(let e=n+1;e<=r;e++){const t=a*Math.pow(1-o,e);d.push(t-l)}return d}return d.slice(0,r)}(d,s,u,p,g,m,c),h=function(e,t,n){const a=12*n,o=e*t/(1-Math.pow(1+t,-a)),l=[];let r=e;for(let e=1;e<=n;e++){let e=0;for(let n=1;n<=12;n++){const n=o-r*t;e+=n,r-=n}l.push(e)}return l}(d,s,u),b=d*(1+s)/u,v=[];for(let e=1;e<=c;e++){const t=p*Math.pow(1-g,e);v.push(t)}const y=[],L=m+b;for(let e=0;e<Math.min(f.length,u);e++)y.push(L);if(f.length>u)for(let e=u;e<=c;e++)y.push(m);const C=[];let E=-d;for(let e=0;e<Math.min(f.length,u);e++)E+=f[e]+h[e],C.push(E);if(f.length>u)for(let e=u;e<=f.length;e++)E+=f[e],C.push(E);i.data.labels=Array.from({length:c},((e,t)=>t+1)),i.data.datasets[0].data=f,i.data.datasets[1].data=v,i.data.datasets[2].data=y,i.data.datasets[3].data=C,i.update()}()}s(),e.addEventListener("input",s),t.addEventListener("input",s),n.addEventListener("input",s),o.addEventListener("input",s),l.addEventListener("input",s),r.addEventListener("input",s),a.addEventListener("input",s)})).catch((e=>{console.log(e.code,e.message)}))}));